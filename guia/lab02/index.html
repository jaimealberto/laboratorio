<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Lab02 Wazuh controlando agentes - Laboratorio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="icon" href="https://laboratorio.jaimealberto.io/favicon.png">

  
  
  <link rel="stylesheet" href="/css/style.min.aad43d4ecb69a264f2539b89d7f779d5f3cdff22e7585fe5fc3c77272f1c2696.css">
  

  

</head>

<body class='page page-default-single'>
  <div id="main-menu-mobile" class="main-menu-mobile">
  <ul>
    
    
    <li class="menu-item-inicio">
      <a href="/">
        <span>Inicio</span>
      </a>
    </li>
    
    <li class="menu-item-guia">
      <a href="/guia/">
        <span>Guia</span>
      </a>
    </li>
    
  </ul>
</div>
  <div class="wrapper">
    <div class='header'>
  <div class="container">
    <div class="logo">
      <a href="https://laboratorio.jaimealberto.io"><img alt="Logo" src="/images/logo.svg" /></a>
    </div>
    <div class="logo-mobile">
      <a href="https://laboratorio.jaimealberto.io"><img alt="Logo" src="/images/logo-mobile.svg" /></a>
    </div>
    <div id="main-menu" class="main-menu">
  <ul>
    
    
    <li class="menu-item-inicio">
      <a href="/">
        <span>Inicio</span>
      </a>
    </li>
    
    <li class="menu-item-guia">
      <a href="/guia/">
        <span>Guia</span>
      </a>
    </li>
    
  </ul>
</div>
    <button id="toggle-main-menu-mobile" class="hamburger hamburger--slider" type="button">
  <span class="hamburger-box">
    <span class="hamburger-inner"></span>
  </span>
</button>
  </div>
</div>


    
    
    
    
    
    

    
    <div class="container pt-2 pt-md-6 pb-3 pb-md-6">
      <div class="row">
        <div class="col-12 col-md-3 mb-3">
          <div class="sidebar">
            
<div class="docs-menu">
  <h4>Guia</h4>
  <ul>
    
    <li class="">
      <a href="https://laboratorio.jaimealberto.io/guia/herramientas/">Herramientas</a>
    </li>
    
    <li class="">
      <a href="https://laboratorio.jaimealberto.io/guia/plantillas/">Plantillas</a>
    </li>
    
    <li class="">
      <a href="https://laboratorio.jaimealberto.io/guia/ova/">OvA</a>
    </li>
    
    <li class="">
      <a href="https://laboratorio.jaimealberto.io/guia/wireguard/">WireGuard Notas</a>
    </li>
    
    <li class="">
      <a href="https://laboratorio.jaimealberto.io/guia/lab00/">Lab00 Wazuh All in One</a>
    </li>
    
    <li class="">
      <a href="https://laboratorio.jaimealberto.io/guia/lab01/">Lab01 Wazuh desplegando agentes modo manual</a>
    </li>
    
    <li class="active ">
      <a href="https://laboratorio.jaimealberto.io/guia/lab02/">Lab02 Wazuh controlando agentes</a>
    </li>
    
    <li class="">
      <a href="https://laboratorio.jaimealberto.io/guia/lab03/">Lab03 Wazuh Vulnerability Detector</a>
    </li>
    
    <li class="">
      <a href="https://laboratorio.jaimealberto.io/guia/lab04/">Lab04 Wazuh Vulnerability Detector II</a>
    </li>
    
    <li class="">
      <a href="https://laboratorio.jaimealberto.io/guia/lab05/">Lab05 Ansible I</a>
    </li>
    
    <li class="">
      <a href="https://laboratorio.jaimealberto.io/guia/lab06/">Lab06 Ansible II</a>
    </li>
    
  </ul>
</div>

          </div>
        </div>
        <div class="col-12 col-md-9">
          
<h1 class="title">Lab02 Wazuh controlando agentes</h1>
<div class="content ">
  <h2 id="objetivo">Objetivo</h2>
<p>El este laboratorio veremos como poder interactuar con los agentes para su control y actualización. También veremos practicas con grupos de agentes para poder distribuir configuraciones. Todos los binarios de control se encuentran en var/ossec/bin. Los que utilizaremos serán los siguientes:</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">agent_control
agent_groups
agent_upgrade
manage_agents
</code></pre></div><h3 id="agent_control">agent_control</h3>
<p>Su función es el control remoto de los agentes. Lo utilizaremos para lo tipico de arrancar, parar, ver el estado, etc. Algún ejemplo:</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">./agent_control -l <span class="o">&amp;&amp;</span> ./agent_control -lc <span class="o">&amp;&amp;</span> ./agent_control -ln <span class="o">&amp;&amp;</span> ./agent_control -R -a
</code></pre></div><figure>
    <img src="control.gif"/> 
</figure>

<h3 id="agent_groups">agent_groups</h3>
<p>Con este comando podemos gestionar grupos de agentes. Un agente puede estar en uno o varios grupos. Esto es muy util para realizar tareas sobre grupos de hosts, un ejemplo es la configuración remota especifica para un grupo de hosts. En próximos laboratorios veremos en la practica la utilidad de los grupos.</p>
<h3 id="agent_upgrade">agent_upgrade</h3>
<p>Con este comando podremos actualizar remotamente los agentes desplegados.</p>
<h3 id="manage_agents">manage_agents</h3>
<p>Utilidad interactiva en consola que nos muestra un menú para interactuar con los agentes:</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">****************************************
* Wazuh v4.3.5 Agent manager.          *
* The following options are available: *
****************************************
   <span class="o">(</span>A<span class="o">)</span>dd an agent <span class="o">(</span>A<span class="o">)</span>.
   <span class="o">(</span>E<span class="o">)</span>xtract key <span class="k">for</span> an agent <span class="o">(</span>E<span class="o">)</span>.
   <span class="o">(</span>L<span class="o">)</span>ist already added agents <span class="o">(</span>L<span class="o">)</span>.
   <span class="o">(</span>R<span class="o">)</span>emove an agent <span class="o">(</span>R<span class="o">)</span>.
   <span class="o">(</span>Q<span class="o">)</span>uit.
</code></pre></div><p><strong>Ejecutando únicamente cada uno de los comandos nos mostrara una clara guia de uso.</strong></p>

</div>
</div>

        </div>
      </div>
    </div>
    
  </div>

  <div class="sub-footer">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="sub-footer-inner">
          <ul>
            <li class="zerostatic"><a href="https://www.zerostatic.io">www.zerostatic.io</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

  

  
  

  
  <script type="text/javascript" src="/js/scripts.min.1237ff71925bb8625c97a9af8db4c54525258bedfd7c47493daaff723bea755e.js"></script>
  

  
  
  
    
  


</body>

</html>
